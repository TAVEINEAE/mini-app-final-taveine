<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>TAVÉINE AE | Admin</title>
  <link rel="stylesheet" href="admin.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<div class="layout">
  <aside class="sidebar">
    <div class="logo-area">
      <img src="https://i.ibb.co/vz0Lz9S/logo.png" class="logo-img" onerror="this.src='https://cdn-icons-png.flaticon.com/512/8843/8843183.png'">
      <span class="logo-text">TAVÉINE AE</span>
    </div>

    <div class="nav-label">General</div>
    <a class="nav-link active" data-page="dashboard"><i class="fas fa-chart-line"></i> Dashboard</a>
    <a class="nav-link" data-page="products"><i class="fas fa-shopping-bag"></i> Product</a>
    <a class="nav-link" data-page="inventory"><i class="fas fa-box-open"></i> Inventory</a>
    <a class="nav-link" data-page="customers"><i class="fas fa-users"></i> Customers</a>
    <a class="nav-link" data-page="messages"><i class="fas fa-comments"></i> Telegram Chat</a>

    <div class="nav-label">Account</div>
    <a class="nav-link"><i class="fas fa-cog"></i> Settings</a>
    <a class="nav-link" onclick="logout()" style="margin-top:auto; color:#ff5e5e;"><i class="fas fa-sign-out-alt"></i> Logout</a>
  </aside>

  <main class="main">
    <header class="header">
      <h2 id="page-title">Dashboard Overview</h2>
      <div id="auth-status" style="font-weight:600; color:var(--primary);">...</div>
    </header>

    <section class="page" id="dashboard-page">
      <div class="stats-grid">
        <div class="stat-card orange"><p>Ecommerce Revenue</p><h4 id="stat-rev">$245,450</h4></div>
        <div class="stat-card green"><p>New Customers</p><h4 id="stat-users">684</h4></div>
        <div class="stat-card blue"><p>Avg Order Value</p><h4>$2,412.23</h4></div>
        <div class="stat-card pink"><p>Conversion Rate</p><h4>32.65%</h4></div>
      </div>
      <div style="display:grid; grid-template-columns: 2fr 1fr; gap:20px; margin-top:20px;">
        <div class="card" style="height:350px;"><h3>Income Summary</h3><canvas id="mainChart"></canvas></div>
        <div class="card"><h3>Quick Info</h3><div id="quick-stats">Total Products: <b id="total-p-count">0</b></div></div>
      </div>
    </section>

    <section class="page hidden" id="products-page">
      <div class="card" style="margin-bottom:25px;">
        <h3>Add New Product</h3>
        <div style="display:grid; grid-template-columns: repeat(3, 1fr); gap:12px;">
          <input id="p-name" class="form-input" placeholder="Product Name">
          <input id="p-price" class="form-input" placeholder="Price (AED)" type="number">
          <input id="p-category" class="form-input" placeholder="Category (e.g. Hats)">
          <input id="p-image" class="form-input" placeholder="Image URL">
          <input id="p-tags" class="form-input" placeholder="Tags (Sale, New, etc)">
          <button onclick="addProduct()" class="nav-link active" style="border:none; justify-content:center; height:40px;">Add Product</button>
        </div>
      </div>
      <div id="products-container"></div>
    </section>

    <section class="page hidden" id="messages-page">
      <div class="messenger">
        <div class="chat-sidebar" id="chat-list"></div>
        <div class="chat-area">
          <div id="active-chat-user" style="padding:15px; border-bottom:1px solid #eee; font-weight:700;">Select user</div>
          <div class="msgs" id="chat-box"></div>
          <div style="padding:15px; display:flex; gap:10px; background:#fff;">
            <input id="reply-input" placeholder="Type message..." style="flex:1; padding:12px; border-radius:10px; border:1px solid #ddd;">
            <button onclick="sendMessage()" class="nav-link active" style="border:none; width:50px; justify-content:center;"><i class="fas fa-paper-plane"></i></button>
          </div>
        </div>
      </div>
    </section>
  </main>
</div>

<div id="edit-modal">
  <div class="modal-box">
    <h3>Edit Product</h3>
    <input id="edit-id" type="hidden">
    <input id="edit-name" class="form-input" placeholder="Name">
    <input id="edit-price" class="form-input" type="number" placeholder="Price">
    <button onclick="updateProduct()" class="nav-link active" style="border:none; width:100%; justify-content:center; margin-top:10px;">Update & Close</button>
    <button onclick="closeModal()" style="width:100%; background:none; border:none; color:gray; margin-top:10px; cursor:pointer;">Cancel</button>
  </div>
</div>

<script type="module" src="admin.js"></script>
</body>
</html>
